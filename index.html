<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BTC Signage</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- Loading screen -->
        <div id="loading-screen" class="loading-screen">
            <div class="loading-content">
                <div class="spinner"></div>
                <h2>Loading BTC Signage...</h2>
                <p>Initializing displays</p>
            </div>
        </div>

        <!-- Main content -->
        <div id="main-content" class="main-content hidden">
            <!-- Navigation indicators -->
            <div class="nav-indicators">
                <div class="indicators-container">
                    <!-- Dots will be generated by JavaScript -->
                </div>
            </div>

            <!-- Content container - BrowserViews will be displayed here -->
            <div class="content-container">
                <!-- BrowserViews are managed by the main process -->
            </div>

            <!-- Controls overlay -->
            <div class="controls-overlay">
                <!-- Humidity -->
                <div class="humidity-group" id="humidity-group">
                    <img id="humidity-icon" src="humidity_percentage_24dp.svg" alt="Humidity" class="weather-icon humidity-icon">
                    <span id="humidity-value" class="humidity-value">--%</span>
                </div>
                
                <div class="moon-phase-group">
                    <span id="moon-phase" class="nav-button prev-button"></span>
                    <span id="moon-phase-name" class="moon-phase-name"></span>
                </div>
                <div class="sunrise-group">
                    <img id="sunrise-icon" src="wi-sunrise.svg" alt="Sunrise" class="weather-icon">
                    <span id="sunrise-time" class="sunrise-time">--:--</span>
                </div>
                <button id="prev-btn" class="nav-button prev-button">‹</button>
                <div class="uv-index-group">
                    <img id="uv-icon" src="uv-index-alt-svgrepo-com.svg" alt="UV Index" class="weather-icon">
                    <span id="uv-value" class="uv-value">--</span>
                </div>
                <button id="next-btn" class="nav-button next-button">›</button>
                <div class="sunset-group">
                    <img id="sunset-icon" src="wi-sunset.svg" alt="Sunset" class="weather-icon">
                    <span id="sunset-time" class="sunset-time">--:--</span>
                </div>
                
                <!-- Temperature -->
                <div class="temperature-group" id="temperature-group" style="display: flex;">
                    <img id="temperature-icon" src="device_thermostat_24dp.svg" alt="Temperature" class="weather-icon temperature-icon">
                    <span id="temperature-value" class="temperature-value">--°C</span>
                </div>
                
                <!-- Bitcoin History -->
                <div class="bitcoin-history-group" id="bitcoin-history-group" style="display: none;">
                    <img id="bitcoin-history-icon" src="cal-btc.svg" alt="Bitcoin History" class="weather-icon history-icon">
                </div>

                <!-- Screensaver button -->
                <button id="screensaver-btn" class="screensaver-button">
                    <img src="wallpaper_24dp.svg" alt="Screensaver" class="button-icon">
                </button>
                
                <!-- Settings button -->
                <button id="settings-btn" class="settings-button">
                    <img src="settings_24dp.svg" alt="Settings" class="button-icon">
                </button>
                
                <!-- Exit button -->
                <button id="exit-btn" class="exit-button">
                    <img src="logout_24dp.svg" alt="Exit" class="button-icon">
                </button>
            </div>

            <!-- Error overlay -->
            <div id="error-overlay" class="error-overlay hidden">
                <div class="error-content">
                    <h3>⚠️ Display Error</h3>
                    <p id="error-message">Unable to load content</p>
                    <button id="retry-btn" class="retry-button">Retry</button>
                </div>
            </div>

            <!-- Settings popup -->
            <div id="settings-overlay" class="settings-overlay hidden">
                <div class="settings-content">
                    <div class="settings-header">
                        <h3>
                            <img src="settings_24dp.svg" alt="Settings" class="header-icon">
                            Settings
                        </h3>
                        <div class="settings-header-buttons">
                            <button id="virtual-keyboard-toggle" class="keyboard-toggle-button" title="Toggle Virtual Keyboard">
                                <img src="keyboard_keys_24dp.svg" alt="Virtual Keyboard" class="button-icon">
                            </button>
                            <button id="settings-close" class="close-button">✕</button>
                        </div>
                    </div>
                    
                    <form id="settings-form" class="settings-form">
                        <!-- Tab Navigation -->
                        <div class="settings-tabs">
                            <button type="button" class="tab-button active" data-tab="general">General</button>
                            <button type="button" class="tab-button" data-tab="screensaver">Screensaver</button>
                            <button type="button" class="tab-button" data-tab="weather">Weather</button>
                        </div>

                        <!-- General Tab Content -->
                        <div class="tab-content active" id="general-tab">
                            <div class="form-group">
                                <label>Display URLs:</label>
                                <div id="urls-container" class="urls-container">
                                    <!-- URL entries will be dynamically generated -->
                                </div>
                                <button type="button" id="add-url-btn" class="add-url-button">+ Add URL</button>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="auto-rotate">
                                        <input type="checkbox" id="auto-rotate"> Auto-rotate displays
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label for="fullscreen">
                                        <input type="checkbox" id="fullscreen"> Start in fullscreen
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label for="show-moon-phase">
                                        <input type="checkbox" id="show-moon-phase"> Show moon phase
                                    </label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="rotate-interval">Auto-rotate interval (minutes):</label>
                                <input type="text" id="rotate-interval" pattern="[0-9]+" title="Please enter a number between 1 and 60" placeholder="1" data-min="1" data-max="60">
                            </div>

                            <div class="form-group">
                                <label for="dev-tools">
                                    <input type="checkbox" id="dev-tools"> Enable developer tools
                                </label>
                            </div>
                        </div>

                        <!-- Screensaver Tab Content -->
                        <div class="tab-content" id="screensaver-tab">
                            <div class="form-group">
                                <label for="use-quotes-screensaver">
                                    <input type="checkbox" id="use-quotes-screensaver"> Use "The Quotable Satoshi" screensaver
                                </label>
                                <small class="form-help">Check this to use local "The Quotable Satoshi" screensaver.</small>
                            </div>

                            <div class="form-group">
                                <label for="screensaver-url">Screensaver URL:</label>
                                <input type="text" id="screensaver-url" placeholder="https://lodev09.github.io/web-screensavers/jellyfish/" value="">
                                <small class="form-help">Enter the URL for your preferred screensaver. Leave empty to use the default jellyfish screensaver.</small>
                            </div>

                            <div class="form-group">
                                <label for="screensaver-enabled">
                                    <input type="checkbox" id="screensaver-enabled"> Enable screensaver button
                                </label>
                            </div>
                        </div>

                        <!-- Weather Tab Content -->
                        <div class="tab-content" id="weather-tab">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="show-weather">
                                        <input type="checkbox" id="show-weather"> Show sunrise/sunset
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label for="show-uv">
                                        <input type="checkbox" id="show-uv"> Show UV Index
                                    </label>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="show-temperature">
                                        <input type="checkbox" id="show-temperature"> Show temperature
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label for="show-humidity">
                                        <input type="checkbox" id="show-humidity"> Show humidity
                                    </label>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="time-format">Time format:</label>
                                    <select id="time-format">
                                        <option value="24">24-hour (15:30)</option>
                                        <option value="12">12-hour (3:30 PM)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="temperature-unit">Temperature unit:</label>
                                    <select id="temperature-unit">
                                        <option value="C">Celsius (°C)</option>
                                        <option value="F">Fahrenheit (°F)</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="latitude">Latitude:</label>
                                    <input type="text" id="latitude" pattern="^-?[0-9]*\.?[0-9]+$" title="Please enter a valid latitude (-90 to 90)" placeholder="40.7128" data-min="-90" data-max="90">
                                </div>
                                <div class="form-group">
                                    <label for="longitude">Longitude:</label>
                                    <input type="text" id="longitude" pattern="^-?[0-9]*\.?[0-9]+$" title="Please enter a valid longitude (-180 to 180)" placeholder="-74.0060" data-min="-180" data-max="180">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="uv-update-frequency">Weather update frequency:</label>
                                <select id="uv-update-frequency">
                                    <option value="15">Every 15 minutes</option>
                                    <option value="30">Every 30 minutes</option>
                                    <option value="45">Every 45 minutes</option>
                                    <option value="60">Every 60 minutes</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" id="settings-cancel" class="cancel-button">Cancel</button>
                            <button type="submit" id="settings-save" class="save-button">Save & Apply</button>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- Bitcoin History popup -->
            <div id="bitcoin-history-overlay" class="bitcoin-history-overlay hidden">
                <div class="bitcoin-history-content">
                    <div class="bitcoin-history-header">
                        <h3>₿ Bitcoin History</h3>
                        <div class="bitcoin-history-counter" id="bitcoin-history-counter">1 / 1</div>
                        <button id="bitcoin-history-close" class="close-button">✕</button>
                    </div>
                    <div class="bitcoin-history-body">
                        <div class="bitcoin-history-date" id="bitcoin-history-date"></div>
                        <div class="bitcoin-history-title" id="bitcoin-history-title"></div>
                        <div class="bitcoin-history-description" id="bitcoin-history-description"></div>
                    </div>
                    <div class="bitcoin-history-navigation">
                        <button id="bitcoin-history-prev" class="bitcoin-nav-button">‹ Previous</button>
                        <button id="bitcoin-history-next" class="bitcoin-nav-button">Next ›</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Virtual Keyboard (positioned absolutely) -->
    <div id="virtual-keyboard" class="virtual-keyboard hidden" tabindex="-1">
        <div class="keyboard-row">
            <button class="key-btn dual-key" tabindex="-1" data-key="1"><span class="key-secondary">!</span><span class="key-primary">1</span></button>
            <button class="key-btn dual-key" tabindex="-1" data-key="2"><span class="key-secondary">@</span><span class="key-primary">2</span></button>
            <button class="key-btn dual-key" tabindex="-1" data-key="3"><span class="key-secondary">#</span><span class="key-primary">3</span></button>
            <button class="key-btn dual-key" tabindex="-1" data-key="4"><span class="key-secondary">$</span><span class="key-primary">4</span></button>
            <button class="key-btn dual-key" tabindex="-1" data-key="5"><span class="key-secondary">%</span><span class="key-primary">5</span></button>
            <button class="key-btn dual-key" tabindex="-1" data-key="6"><span class="key-secondary">^</span><span class="key-primary">6</span></button>
            <button class="key-btn dual-key" tabindex="-1" data-key="7"><span class="key-secondary">&</span><span class="key-primary">7</span></button>
            <button class="key-btn dual-key" tabindex="-1" data-key="8"><span class="key-secondary">*</span><span class="key-primary">8</span></button>
            <button class="key-btn dual-key" tabindex="-1" data-key="9"><span class="key-secondary">(</span><span class="key-primary">9</span></button>
            <button class="key-btn dual-key" tabindex="-1" data-key="0"><span class="key-secondary">)</span><span class="key-primary">0</span></button>
            <button class="key-btn dual-key" tabindex="-1" data-key="-"><span class="key-secondary">_</span><span class="key-primary">-</span></button>
            <button class="key-btn dual-key" tabindex="-1" data-key="="><span class="key-secondary">+</span><span class="key-primary">=</span></button>
            <button class="key-btn key-backspace" tabindex="-1" data-key="Backspace">⌫</button>
        </div>
        <div class="keyboard-row">
            <button class="key-btn" tabindex="-1" data-key="q">Q</button>
            <button class="key-btn" tabindex="-1" data-key="w">W</button>
            <button class="key-btn" tabindex="-1" data-key="e">E</button>
            <button class="key-btn" tabindex="-1" data-key="r">R</button>
            <button class="key-btn" tabindex="-1" data-key="t">T</button>
            <button class="key-btn" tabindex="-1" data-key="y">Y</button>
            <button class="key-btn" tabindex="-1" data-key="u">U</button>
            <button class="key-btn" tabindex="-1" data-key="i">I</button>
            <button class="key-btn" tabindex="-1" data-key="o">O</button>
            <button class="key-btn" tabindex="-1" data-key="p">P</button>
            <button class="key-btn dual-key" tabindex="-1" data-key="["><span class="key-secondary">{</span><span class="key-primary">[</span></button>
            <button class="key-btn dual-key" tabindex="-1" data-key="]"><span class="key-secondary">}</span><span class="key-primary">]</span></button>
            <button class="key-btn dual-key" tabindex="-1" data-key="\"><span class="key-secondary">|</span><span class="key-primary">\</span></button>
        </div>
        <div class="keyboard-row">
            <button class="key-btn key-caps" tabindex="-1" data-key="CapsLock">Caps</button>
            <button class="key-btn" tabindex="-1" data-key="a">A</button>
            <button class="key-btn" tabindex="-1" data-key="s">S</button>
            <button class="key-btn" tabindex="-1" data-key="d">D</button>
            <button class="key-btn" tabindex="-1" data-key="f">F</button>
            <button class="key-btn" tabindex="-1" data-key="g">G</button>
            <button class="key-btn" tabindex="-1" data-key="h">H</button>
            <button class="key-btn" tabindex="-1" data-key="j">J</button>
            <button class="key-btn" tabindex="-1" data-key="k">K</button>
            <button class="key-btn" tabindex="-1" data-key="l">L</button>
            <button class="key-btn dual-key" tabindex="-1" data-key=";"><span class="key-secondary">:</span><span class="key-primary">;</span></button>
            <button class="key-btn dual-key" tabindex="-1" data-key="'"><span class="key-secondary">"</span><span class="key-primary">'</span></button>
            <button class="key-btn key-enter" tabindex="-1" data-key="Enter">Enter</button>
        </div>
        <div class="keyboard-row">
            <button class="key-btn key-shift" tabindex="-1" data-key="Shift">Shift</button>
            <button class="key-btn" tabindex="-1" data-key="z">Z</button>
            <button class="key-btn" tabindex="-1" data-key="x">X</button>
            <button class="key-btn" tabindex="-1" data-key="c">C</button>
            <button class="key-btn" tabindex="-1" data-key="v">V</button>
            <button class="key-btn" tabindex="-1" data-key="b">B</button>
            <button class="key-btn" tabindex="-1" data-key="n">N</button>
            <button class="key-btn" tabindex="-1" data-key="m">M</button>
            <button class="key-btn dual-key" tabindex="-1" data-key=","><span class="key-secondary">&lt;</span><span class="key-primary">,</span></button>
            <button class="key-btn dual-key" tabindex="-1" data-key="."><span class="key-secondary">&gt;</span><span class="key-primary">.</span></button>
            <button class="key-btn dual-key" tabindex="-1" data-key="/"><span class="key-secondary">?</span><span class="key-primary">/</span></button>
            <button class="key-btn key-shift" tabindex="-1" data-key="Shift">Shift</button>
        </div>
        <div class="keyboard-row">
            <button class="key-btn key-space" tabindex="-1" data-key=" ">Space</button>
        </div>
    </div>

    <!-- Touch gesture area -->
    <div id="gesture-area" class="gesture-area"></div>

    <script src="renderer.js"></script>
</body>
</html>
